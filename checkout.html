<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Planes | Mesocycle Tracker</title>
    <style>
        body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 1100px;
        margin: 40px auto;
        background: #fff;
        padding: 30px;
        border-radius: 8px;
    }
        h1, h2 {
            color: #e53935;
            margin-bottom: 10px;
        }
    
        .layout {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
        }
    
        .plans, .checkout {
            flex: 1;
            min-width: 300px;
        }
    
        .plan-card {
            border: 1px solid #333;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            background: #1a1a1a;
            transition: all 0.2s ease;
        }
        
        .plan-card:hover {
            border-color: #e53935;
            background: #222;
        }
        
        .plan-card.active {
            border: 2px solid #e53935;
            background: #222;
        }
    
        .price {
            font-size: 22px;
            font-weight: bold;
            margin: 8px 0;
        }
    
        ul {
            padding-left: 20px;
        }
    
        .note {
            font-size: 13px;
            color: #555;
            margin-top: 10px;
        }
    
        label {
            display: block;
            margin-top: 15px;
        }
    
        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }
    
        .hidden {
            display: none;
        }
    
        /* Botones */
        button {
            margin-top: 25px;
            padding: 14px;
            width: 100%;
            background: #ed2100; /* rojo */
            color: #fff;
            border: none;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.2s ease;
        }
        
        button:hover {
            background: #c62828; /* rojo m치s oscuro en hover */
        }
        
        button.secondary {
            background: #333;
            color: #fff;
        }
        
        button.secondary:hover {
            background: #555;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Elige tu plan</h1>

    <div class="layout">

        <!-- 游댳 SELECTOR DE PLANES -->
        <div class="plans">

            <div class="plan-card" onclick="selectPlan('gratis')" id="plan-gratis">
                <h3>Gratis</h3>
                <p>Todo lo necesario para ejecutar un mesociclo s칩lido.</p>
                <div class="price">$0</div>
                <ul>
                    <li>1 mesociclo activo</li>
                    <li>Registro de entrenamientos</li>
                    <li>PRs autom치ticos</li>
                    <li>Seguimiento b치sico de fuerza</li>
                </ul>
                <p class="note">Empieza gratis 췅 Sin tarjeta</p>
            </div>

            <div class="plan-card active" onclick="selectPlan('pro')" id="plan-pro">
                <h3>Pro</h3>
                <p>Para lifters que quieren entender por qu칠 progresan (o no).</p>
                <div class="price">$9 / mes</div>
                <ul>
                    <li>Mesociclos ilimitados</li>
                    <li>Comparaci칩n entre ciclos</li>
                    <li>Gr치ficas avanzadas</li>
                    <li>Historial completo</li>
                    <li>Exportaci칩n de datos</li>
                </ul>
                <p class="note">Cancela cuando quieras 췅 Tus datos son tuyos</p>
            </div>

            <div class="plan-card" onclick="selectPlan('anual')" id="plan-anual">
                <h3>Anual</h3>
                <p>An치lisis completo todo el a침o con ahorro.</p>
                <div class="price">$99 / a침o</div>
                <ul>
                    <li>Mesociclos ilimitados</li>
                    <li>Comparaci칩n entre ciclos</li>
                    <li>Gr치ficas avanzadas</li>
                    <li>Historial completo</li>
                    <li>Exportaci칩n de datos</li>
                    <li>Soporte prioritario</li>
                </ul>
                <p class="note">Ahorra comparado con mensual 췅 Tus datos son tuyos</p>
            </div>

        </div>

        <!-- 游눱 CHECKOUT -->
        <div class="checkout">
            <h2>Finalizar</h2>

            <p id="selectedPlanText"><strong>Plan seleccionado:</strong> Pro ($9 / mes)</p>

            <!-- Pago para Pro/Anual -->
            <div id="paymentSection">
                <label>M칠todo de pago</label>
                <select onchange="togglePaymentFields(this.value)">
                    <option value="">-- Selecciona --</option>
                    <option value="card">Tarjeta</option>
                    <option value="paypal">PayPal</option>
                </select>

                <div id="cardFields" class="hidden">
                    <label>N칰mero de tarjeta</label>
                    <input type="text" placeholder="1234 5678 9012 3456">

                    <label>Nombre en la tarjeta</label>
                    <input type="text" placeholder="Nombre completo">

                    <label>Expiraci칩n</label>
                    <input type="text" placeholder="MM/AA">

                    <label>CVV</label>
                    <input type="text" placeholder="123">
                </div>

                <div id="paypalFields" class="hidden">
                    <p>Ser치s redirigido a PayPal para completar el pago.</p>
                </div>

                <button id="confirmBtn" class="secondary" disabled onclick="window.location.href='signup.html'">
                  Confirmar suscripci칩n
                </button>
            </div>

            <!-- Gratis -->
            <div id="freeSection" class="hidden">
                <p>Este plan no requiere pago.</p>
                <button class="secondary" onclick="window.location.href='signup.html'">Empezar gratis</button>
            </div>
        </div>

    </div>
</div>

<script>
    let currentPlan = "pro";

    function selectPlan(plan) {
        currentPlan = plan;

        // Resaltar plan seleccionado
        document.querySelectorAll(".plan-card").forEach(card => {
            card.classList.remove("active");
        });
        document.getElementById(`plan-${plan}`).classList.add("active");

        const planText = document.getElementById("selectedPlanText");
        const paymentSection = document.getElementById("paymentSection");
        const freeSection = document.getElementById("freeSection");

        if (plan === "gratis") {
            planText.innerHTML = "<strong>Plan seleccionado:</strong> Gratis ($0)";
            paymentSection.classList.add("hidden");
            freeSection.classList.remove("hidden");
        } else if (plan === "pro") {
            planText.innerHTML = "<strong>Plan seleccionado:</strong> Pro ($9 / mes)";
            paymentSection.classList.remove("hidden");
            freeSection.classList.add("hidden");
        } else if (plan === "anual") {
            planText.innerHTML = "<strong>Plan seleccionado:</strong> Anual ($99 / a침o)";
            paymentSection.classList.remove("hidden");
            freeSection.classList.add("hidden");
        }
    }

    function togglePaymentFields(method) {
        document.getElementById("cardFields").classList.add("hidden");
        document.getElementById("paypalFields").classList.add("hidden");
    
        if (method === "card") {
            document.getElementById("cardFields").classList.remove("hidden");
        }
    
        if (method === "paypal") {
            document.getElementById("paypalFields").classList.remove("hidden");
        }
    
        validatePayment();
    }

    const confirmBtn = document.getElementById("confirmBtn");
    const paymentSelect = document.querySelector("#paymentSection select");
    
    function validatePayment() {
        const method = paymentSelect.value;
    
        if (!method) {
            confirmBtn.disabled = true;
            return;
        }
    
        if (method === "card") {
            // Revisar que todos los campos est칠n llenos
            const cardNumber = document.querySelector("#cardFields input:nth-child(2)").value.trim();
            const cardName = document.querySelector("#cardFields input:nth-child(4)").value.trim();
            const exp = document.querySelector("#cardFields input:nth-child(6)").value.trim();
            const cvv = document.querySelector("#cardFields input:nth-child(8)").value.trim();
    
            confirmBtn.disabled = !(cardNumber && cardName && exp && cvv);
        } else if (method === "paypal") {
            // PayPal solo necesita selecci칩n
            confirmBtn.disabled = false;
        }
    }
    
    // Revisar cambios en el select de m칠todo de pago
    paymentSelect.addEventListener("change", validatePayment);
    
    // Revisar cambios en los campos de tarjeta
    document.querySelectorAll("#cardFields input").forEach(input => {
        input.addEventListener("input", validatePayment);
    });

    const urlParams = new URLSearchParams(window.location.search);
    const selectedPlan = urlParams.get("plan") || "pro"; // default pro
    
    function selectPlan(plan) {
      currentPlan = plan;
    
      // Resaltar plan
      document.querySelectorAll(".plan-card").forEach(card => {
          card.classList.remove("active");
      });
      document.getElementById(`plan-${plan}`).classList.add("active");
    
      const planText = document.getElementById("selectedPlanText");
      const paymentSection = document.getElementById("paymentSection");
      const freeSection = document.getElementById("freeSection");
    
      if (plan === "gratis") {
          planText.innerHTML = "<strong>Plan seleccionado:</strong> Gratis ($0)";
          paymentSection.classList.add("hidden");
          freeSection.classList.remove("hidden");
      } else if (plan === "pro") {
          planText.innerHTML = "<strong>Plan seleccionado:</strong> Pro ($9 / mes)";
          paymentSection.classList.remove("hidden");
          freeSection.classList.add("hidden");
      } else if (plan === "anual") {
          planText.innerHTML = "<strong>Plan seleccionado:</strong> Anual ($99 / a침o)";
          paymentSection.classList.remove("hidden");
          freeSection.classList.add("hidden");
      }
    }
    
    // Inicializar plan al cargar la p치gina
    selectPlan(selectedPlan);

</script>

</body>
</html>
