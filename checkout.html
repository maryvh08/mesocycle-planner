<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Planes | Mesocycle Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f4f4f4;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 1100px;
            margin: 40px auto;
            background: #fff;
            padding: 30px;
            border-radius: 8px;
        }

        h1, h2 {
            margin-bottom: 10px;
        }

        .layout {
            display: flex;
            gap: 40px;
            flex-wrap: wrap;
        }

        .plans, .checkout {
            flex: 1;
            min-width: 300px;
        }

        .plan-card {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 20px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .plan-card:hover {
            border-color: #111;
        }

        .plan-card.active {
            border: 2px solid #111;
            background: #fafafa;
        }

        .price {
            font-size: 22px;
            font-weight: bold;
            margin: 8px 0;
        }

        ul {
            padding-left: 20px;
        }

        .note {
            font-size: 13px;
            color: #555;
            margin-top: 10px;
        }

        label {
            display: block;
            margin-top: 15px;
        }

        input, select {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            box-sizing: border-box;
        }

        .hidden {
            display: none;
        }

        button {
            margin-top: 25px;
            padding: 14px;
            width: 100%;
            background: #111;
            color: #fff;
            border: none;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
        }

        button.secondary {
            background: #666;
        }

        button:hover {
            background: #333;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Elige tu plan</h1>

    <div class="layout">

        <!-- üîπ SELECTOR DE PLANES -->
        <div class="plans">

            <div class="plan-card" onclick="selectPlan('gratis')" id="plan-gratis">
                <h3>Gratis</h3>
                <p>Todo lo necesario para ejecutar un mesociclo s√≥lido.</p>
                <div class="price">‚Ç¨0</div>
                <ul>
                    <li>1 mesociclo activo</li>
                    <li>Registro de entrenamientos</li>
                    <li>PRs autom√°ticos</li>
                    <li>Seguimiento b√°sico de fuerza</li>
                </ul>
                <p class="note">Empieza gratis ¬∑ Sin tarjeta</p>
            </div>

            <div class="plan-card active" onclick="selectPlan('pro')" id="plan-pro">
                <h3>Pro</h3>
                <p>Para lifters que quieren entender por qu√© progresan (o no).</p>
                <div class="price">‚Ç¨9 / mes</div>
                <ul>
                    <li>Mesociclos ilimitados</li>
                    <li>Comparaci√≥n entre ciclos</li>
                    <li>Gr√°ficas avanzadas</li>
                    <li>Historial completo</li>
                    <li>Exportaci√≥n de datos</li>
                </ul>
                <p class="note">Cancela cuando quieras ¬∑ Tus datos son tuyos</p>
            </div>

            <div class="plan-card" onclick="selectPlan('anual')" id="plan-anual">
                <h3>Anual</h3>
                <p>An√°lisis completo todo el a√±o con ahorro.</p>
                <div class="price">‚Ç¨99 / a√±o</div>
                <ul>
                    <li>Mesociclos ilimitados</li>
                    <li>Comparaci√≥n entre ciclos</li>
                    <li>Gr√°ficas avanzadas</li>
                    <li>Historial completo</li>
                    <li>Exportaci√≥n de datos</li>
                    <li>Soporte prioritario</li>
                </ul>
                <p class="note">Ahorra comparado con mensual ¬∑ Tus datos son tuyos</p>
            </div>

        </div>

        <!-- üí≥ CHECKOUT -->
        <div class="checkout">
            <h2>Finalizar</h2>

            <p id="selectedPlanText"><strong>Plan seleccionado:</strong> Pro (‚Ç¨9 / mes)</p>

            <!-- Pago para Pro/Anual -->
            <div id="paymentSection">
                <label>M√©todo de pago</label>
                <select onchange="togglePaymentFields(this.value)">
                    <option value="">-- Selecciona --</option>
                    <option value="card">Tarjeta</option>
                    <option value="paypal">PayPal</option>
                </select>

                <div id="cardFields" class="hidden">
                    <label>N√∫mero de tarjeta</label>
                    <input type="text" placeholder="1234 5678 9012 3456">

                    <label>Nombre en la tarjeta</label>
                    <input type="text" placeholder="Nombre completo">

                    <label>Expiraci√≥n</label>
                    <input type="text" placeholder="MM/AA">

                    <label>CVV</label>
                    <input type="text" placeholder="123">
                </div>

                <div id="paypalFields" class="hidden">
                    <p>Ser√°s redirigido a PayPal para completar el pago.</p>
                </div>

                <button id="confirmBtn" class="secondary" disabled onclick="window.location.href='signup.html'">
                  Confirmar suscripci√≥n
                </button>
            </div>

            <!-- Gratis -->
            <div id="freeSection" class="hidden">
                <p>Este plan no requiere pago.</p>
                <button class="secondary" onclick="window.location.href='signup.html'">Empezar gratis</button>
            </div>
        </div>

    </div>
</div>

<script>
    let currentPlan = "pro";

    function selectPlan(plan) {
        currentPlan = plan;

        // Resaltar plan seleccionado
        document.querySelectorAll(".plan-card").forEach(card => {
            card.classList.remove("active");
        });
        document.getElementById(`plan-${plan}`).classList.add("active");

        const planText = document.getElementById("selectedPlanText");
        const paymentSection = document.getElementById("paymentSection");
        const freeSection = document.getElementById("freeSection");

        if (plan === "gratis") {
            planText.innerHTML = "<strong>Plan seleccionado:</strong> Gratis (‚Ç¨0)";
            paymentSection.classList.add("hidden");
            freeSection.classList.remove("hidden");
        } else if (plan === "pro") {
            planText.innerHTML = "<strong>Plan seleccionado:</strong> Pro (‚Ç¨9 / mes)";
            paymentSection.classList.remove("hidden");
            freeSection.classList.add("hidden");
        } else if (plan === "anual") {
            planText.innerHTML = "<strong>Plan seleccionado:</strong> Anual (‚Ç¨99 / a√±o)";
            paymentSection.classList.remove("hidden");
            freeSection.classList.add("hidden");
        }
    }

    function togglePaymentFields(method) {
        document.getElementById("cardFields").classList.add("hidden");
        document.getElementById("paypalFields").classList.add("hidden");
    
        if (method === "card") {
            document.getElementById("cardFields").classList.remove("hidden");
        }
    
        if (method === "paypal") {
            document.getElementById("paypalFields").classList.remove("hidden");
        }
    
        validatePayment();
    }

    const confirmBtn = document.getElementById("confirmBtn");
    const paymentSelect = document.querySelector("#paymentSection select");
    
    function validatePayment() {
        const method = paymentSelect.value;
    
        if (!method) {
            confirmBtn.disabled = true;
            return;
        }
    
        if (method === "card") {
            // Revisar que todos los campos est√©n llenos
            const cardNumber = document.querySelector("#cardFields input:nth-child(2)").value.trim();
            const cardName = document.querySelector("#cardFields input:nth-child(4)").value.trim();
            const exp = document.querySelector("#cardFields input:nth-child(6)").value.trim();
            const cvv = document.querySelector("#cardFields input:nth-child(8)").value.trim();
    
            confirmBtn.disabled = !(cardNumber && cardName && exp && cvv);
        } else if (method === "paypal") {
            // PayPal solo necesita selecci√≥n
            confirmBtn.disabled = false;
        }
    }
    
    // Revisar cambios en el select de m√©todo de pago
    paymentSelect.addEventListener("change", validatePayment);
    
    // Revisar cambios en los campos de tarjeta
    document.querySelectorAll("#cardFields input").forEach(input => {
        input.addEventListener("input", validatePayment);
    });

    const urlParams = new URLSearchParams(window.location.search);
    const selectedPlan = urlParams.get("plan") || "pro"; // default pro
    
    function selectPlan(plan) {
      currentPlan = plan;
    
      // Resaltar plan
      document.querySelectorAll(".plan-card").forEach(card => {
          card.classList.remove("active");
      });
      document.getElementById(`plan-${plan}`).classList.add("active");
    
      const planText = document.getElementById("selectedPlanText");
      const paymentSection = document.getElementById("paymentSection");
      const freeSection = document.getElementById("freeSection");
    
      if (plan === "gratis") {
          planText.innerHTML = "<strong>Plan seleccionado:</strong> Gratis (‚Ç¨0)";
          paymentSection.classList.add("hidden");
          freeSection.classList.remove("hidden");
      } else if (plan === "pro") {
          planText.innerHTML = "<strong>Plan seleccionado:</strong> Pro (‚Ç¨9 / mes)";
          paymentSection.classList.remove("hidden");
          freeSection.classList.add("hidden");
      } else if (plan === "anual") {
          planText.innerHTML = "<strong>Plan seleccionado:</strong> Anual (‚Ç¨99 / a√±o)";
          paymentSection.classList.remove("hidden");
          freeSection.classList.add("hidden");
      }
    }
    
    // Inicializar plan al cargar la p√°gina
    selectPlan(selectedPlan);

</script>

</body>
</html>
